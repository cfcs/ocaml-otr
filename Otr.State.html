<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="next" href="Otr.Engine.html">
<link rel="Up" href="Otr.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Otr" rel="Chapter" href="Otr.html"><link title="Type definitions and predicates" rel="Section" href="#1_Typedefinitionsandpredicates">
<title>Otr.State</title>
</head>
<body>
<div class="navbar">&nbsp;<a class="up" href="Otr.html" title="Otr">Up</a>
&nbsp;<a class="post" href="Otr.Engine.html" title="Otr.Engine">Next</a>
</div>
<h1>Module <a href="type_Otr.State.html">Otr.State</a></h1>

<pre><span class="keyword">module</span> State: <code class="code">sig</code> <a href="Otr.State.html">..</a> <code class="code">end</code></pre><div class="info module top">
States and types<br>
</div>
<hr width="100%">
<br>
<h1 id="1_Typedefinitionsandpredicates">Type definitions and predicates</h1><br>

<pre><span id="TYPEret"><span class="keyword">type</span> <code class="type"></code>ret</span> = <code class="type">[ `Established_encrypted_session of string<br>       | `Received of string<br>       | `Received_encrypted of string<br>       | `Received_error of string<br>       | `SMP_awaiting_secret<br>       | `SMP_failure<br>       | `SMP_received_question of string<br>       | `SMP_success<br>       | `Warning of string ]</code> </pre>
<div class="info ">
Return values of functions in the <a href="Otr.Engine.html"><code class="code">Otr.Engine</code></a> module.<br>
</div>


<pre><span id="TYPEpolicy"><span class="keyword">type</span> <code class="type"></code>policy</span> = <code class="type">[ `ERROR_START_AKE<br>       | `REQUIRE_ENCRYPTION<br>       | `REVEAL_MACS<br>       | `SEND_WHITESPACE_TAG<br>       | `WHITESPACE_START_AKE ]</code> </pre>
<div class="info ">
OTR policies, as defined in the protocol.<br>
</div>


<pre><span id="VALpolicy_to_string"><span class="keyword">val</span> policy_to_string</span> : <code class="type"><a href="Otr.State.html#TYPEpolicy">policy</a> -> string</code></pre><div class="info ">
<code class="code">policy_to_string policy</code> is <code class="code">string</code>, the string representation
      of the given <code class="code">policy</code>.<br>
</div>

<pre><span id="VALstring_to_policy"><span class="keyword">val</span> string_to_policy</span> : <code class="type">string -> <a href="Otr.State.html#TYPEpolicy">policy</a> option</code></pre><div class="info ">
<code class="code">string_to_policy string</code> is <code class="code">policy</code>, the <code class="code">policy</code> matching the
      string (<code class="code">None</code> if none matches).<br>
</div>

<pre><span id="VALall_policies"><span class="keyword">val</span> all_policies</span> : <code class="type"><a href="Otr.State.html#TYPEpolicy">policy</a> list</code></pre><div class="info ">
<code class="code">all_policies</code> returns a list of all defined policies.<br>
</div>

<pre><span id="TYPEversion"><span class="keyword">type</span> <code class="type"></code>version</span> = <code class="type">[ `V2 | `V3 ]</code> </pre>
<div class="info ">
OTR protocol versions supported by this library<br>
</div>


<pre><span id="VALversion_to_string"><span class="keyword">val</span> version_to_string</span> : <code class="type"><a href="Otr.State.html#TYPEversion">version</a> -> string</code></pre><div class="info ">
<code class="code">version_to_string version</code> is <code class="code">string</code>, the string
     representation of the <code class="code">version</code>.<br>
</div>

<pre><span id="VALstring_to_version"><span class="keyword">val</span> string_to_version</span> : <code class="type">string -> <a href="Otr.State.html#TYPEversion">version</a> option</code></pre><div class="info ">
<code class="code">string_to_version string</code> is <code class="code">version</code>, the <code class="code">version</code> matching
      the string (<code class="code">None</code> if none matches).<br>
</div>

<pre><span id="VALall_versions"><span class="keyword">val</span> all_versions</span> : <code class="type"><a href="Otr.State.html#TYPEversion">version</a> list</code></pre><div class="info ">
<code class="code">all_versions</code> returns a list of all supported versions.<br>
</div>

<pre><code><span id="TYPEconfig"><span class="keyword">type</span> <code class="type"></code>config</span> = {</code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTconfig.policies">policies</span>&nbsp;: <code class="type"><a href="Otr.State.html#TYPEpolicy">policy</a> list</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTconfig.versions">versions</span>&nbsp;: <code class="type"><a href="Otr.State.html#TYPEversion">version</a> list</code>;</code></td>

</tr></table>
}

<div class="info ">
OTR configuration consisting of a set of policies and versions.<br>
</div>


<pre><span id="VALconfig"><span class="keyword">val</span> config</span> : <code class="type"><a href="Otr.State.html#TYPEversion">version</a> list -> <a href="Otr.State.html#TYPEpolicy">policy</a> list -> <a href="Otr.State.html#TYPEconfig">config</a></code></pre><div class="info ">
<code class="code">config versions policies</code> is <code class="code">config</code>, the configuration with
      the given <code class="code">versions</code> and <code class="code">policies</code>.<br>
</div>

<pre><span id="TYPEsession"><span class="keyword">type</span> <code class="type"></code>session</span> </pre>
<div class="info ">
An abstract OTR session<br>
</div>


<pre><span id="VALsession_to_string"><span class="keyword">val</span> session_to_string</span> : <code class="type"><a href="Otr.State.html#TYPEsession">session</a> -> string</code></pre><div class="info ">
<code class="code">session_to_string session</code> is <code class="code">string</code>, the string
      representation of the <code class="code">session</code>.<br>
</div>

<pre><span id="VALversion"><span class="keyword">val</span> version</span> : <code class="type"><a href="Otr.State.html#TYPEsession">session</a> -> <a href="Otr.State.html#TYPEversion">version</a></code></pre><div class="info ">
<code class="code">version session</code> is <code class="code">version</code>, the current active protocol
      version of this <code class="code">session</code>.<br>
</div>

<pre><span id="VALis_encrypted"><span class="keyword">val</span> is_encrypted</span> : <code class="type"><a href="Otr.State.html#TYPEsession">session</a> -> bool</code></pre><div class="info ">
<code class="code">is_encrypted session</code> is <code class="code">true</code> if the session is
      established.<br>
</div>

<pre><span id="VALtheir_dsa"><span class="keyword">val</span> their_dsa</span> : <code class="type"><a href="Otr.State.html#TYPEsession">session</a> -> Nocrypto.Dsa.pub option</code></pre><div class="info ">
<code class="code">their_dsa session</code> is <code class="code">dsa</code>, the public DSA key used by the
      communication partner (if the session is established).<br>
</div>

<pre><span id="VALnew_session"><span class="keyword">val</span> new_session</span> : <code class="type"><a href="Otr.State.html#TYPEconfig">config</a> -> Nocrypto.Dsa.priv -> unit -> <a href="Otr.State.html#TYPEsession">session</a></code></pre><div class="info ">
<code class="code">new_session configuration dsa ()</code> is <code class="code">session</code>, a fresh session given
      the <code class="code">configuration</code> and <code class="code">dsa</code> private key.<br>
</div>

<pre><span id="VALupdate_config"><span class="keyword">val</span> update_config</span> : <code class="type"><a href="Otr.State.html#TYPEconfig">config</a> -> <a href="Otr.State.html#TYPEsession">session</a> -> <a href="Otr.State.html#TYPEsession">session</a></code></pre><div class="info ">
<code class="code">update_config config session</code> is <code class="code">session</code>, the <code class="code">session</code>
      adjusted to the <code class="code">config</code>.  Note: the <code class="code">session</code> might not conform
      to the config anymore!<br>
</div>

<pre><span id="VALpolicy_of_sexp"><span class="keyword">val</span> policy_of_sexp</span> : <code class="type">Sexplib.Sexp.t -> <a href="Otr.State.html#TYPEpolicy">policy</a></code></pre>
<pre><span id="VAL__policy_of_sexp__"><span class="keyword">val</span> __policy_of_sexp__</span> : <code class="type">Sexplib.Sexp.t -> <a href="Otr.State.html#TYPEpolicy">policy</a></code></pre>
<pre><span id="VALsexp_of_policy"><span class="keyword">val</span> sexp_of_policy</span> : <code class="type"><a href="Otr.State.html#TYPEpolicy">policy</a> -> Sexplib.Sexp.t</code></pre><br>
<code class="code">policy_to_string policy</code> is <code class="code">string</code>, the string representation
      of the given <code class="code">policy</code>.<br>
<br>
<code class="code">string_to_policy string</code> is <code class="code">policy</code>, the <code class="code">policy</code> matching the
      string (<code class="code">None</code> if none matches).<br>
<br>
<code class="code">all_policies</code> returns a list of all defined policies.<br>

<pre><span id="VALversion_of_sexp"><span class="keyword">val</span> version_of_sexp</span> : <code class="type">Sexplib.Sexp.t -> <a href="Otr.State.html#TYPEversion">version</a></code></pre><div class="info ">
OTR protocol versions supported by this library<br>
</div>

<pre><span id="VAL__version_of_sexp__"><span class="keyword">val</span> __version_of_sexp__</span> : <code class="type">Sexplib.Sexp.t -> <a href="Otr.State.html#TYPEversion">version</a></code></pre>
<pre><span id="VALsexp_of_version"><span class="keyword">val</span> sexp_of_version</span> : <code class="type"><a href="Otr.State.html#TYPEversion">version</a> -> Sexplib.Sexp.t</code></pre><br>
<code class="code">version_to_string version</code> is <code class="code">string</code>, the string
     representation of the <code class="code">version</code>.<br>
<br>
<code class="code">string_to_version string</code> is <code class="code">version</code>, the <code class="code">version</code> matching
      the string (<code class="code">None</code> if none matches).<br>
<br>
<code class="code">all_versions</code> returns a list of all supported versions.<br>

<pre><span id="VALconfig_of_sexp"><span class="keyword">val</span> config_of_sexp</span> : <code class="type">Sexplib.Sexp.t -> <a href="Otr.State.html#TYPEconfig">config</a></code></pre><div class="info ">
OTR configuration consisting of a set of policies and versions.<br>
</div>

<pre><span id="VALsexp_of_config"><span class="keyword">val</span> sexp_of_config</span> : <code class="type"><a href="Otr.State.html#TYPEconfig">config</a> -> Sexplib.Sexp.t</code></pre><br>
<code class="code">config versions policies</code> is <code class="code">config</code>, the configuration with
      the given <code class="code">versions</code> and <code class="code">policies</code>.<br>
<br>
An abstract OTR session<br>
<br>
<code class="code">session_to_string session</code> is <code class="code">string</code>, the string
      representation of the <code class="code">session</code>.<br>
<br>
<code class="code">version session</code> is <code class="code">version</code>, the current active protocol
      version of this <code class="code">session</code>.<br>
<br>
<code class="code">is_encrypted session</code> is <code class="code">true</code> if the session is
      established.<br>
<br>
<code class="code">their_dsa session</code> is <code class="code">dsa</code>, the public DSA key used by the
      communication partner (if the session is established).<br>
<br>
<code class="code">new_session configuration dsa ()</code> is <code class="code">session</code>, a fresh session given
      the <code class="code">configuration</code> and <code class="code">dsa</code> private key.<br>
<br>
<code class="code">update_config config session</code> is <code class="code">session</code>, the <code class="code">session</code>
      adjusted to the <code class="code">config</code>.  Note: the <code class="code">session</code> might not conform
      to the config anymore!<br>
</body></html>